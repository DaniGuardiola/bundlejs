{
  "version": 3,
  "sources": ["src/ts/main.ts", "src/ts/modules/default.ts", "web-worker:./workers/esbuild.ts"],
  "sourcesContent": ["import { importShim } from \"./util/dynamic-import\";\nimport * as Default from \"./modules/default\";\n\nimport { animate } from \"@okikio/animate\";\nimport { hit } from \"countapi-js\";\n\nimport type { editor as Editor } from \"monaco-editor\";\n\nlet loadingContainerEl = document.querySelector(\".center-container\");\nlet fileSizeEl = document.querySelector(\".file-size\");\nlet RunBtn = document.querySelector(\"#run\");\nlet bundleTime = document.querySelector(\"#bundle-time\");\nlet Fade = animate({\n    target: loadingContainerEl,\n    opacity: [1, 0],\n    delay: 1000,\n    easing: \"ease-in\",\n    duration: 500,\n    autoplay: false\n});\n\nlet editor: Editor.IStandaloneCodeEditor;\n\n// The default navbar, etc... that is needed\nDefault.build();\n\n// countapi-js hit counter. It counts the number of time the website is loaded\n// (async () => {\n//     try {\n//         let { value } = await hit('bundle.js.org', 'visits');\n//         let visitCounterEl = document.querySelector(\"#visit-counter\");\n//         if (visitCounterEl) visitCounterEl.textContent = `(${value} Page Visits)`;\n//     } catch (err) {\n//         console.warn(\"Visit Counter Error (please create a new issue in the repo)\", err);\n//     }\n// })();\n\n// Monaco Code Editor\n(async () => {\n    let Monaco = await import(\"./modules/monaco\");\n    editor = Monaco.build();\n\n    // Fade away the loading screen\n    Fade.play();\n    await Fade;\n\n    loadingContainerEl?.remove();\n    Fade.stop();\n\n    loadingContainerEl = null;\n    Fade = null;\n})();\n\n// SarchResults solidjs component\n(async () => {\n    const searchInput = document.querySelector(\".search input\") as HTMLInputElement;\n    const host = \"https://registry.npmjs.com/\";\n    const parseInput = (input: string) => {\n        let value = input; // sanitize\n        let exec = /([\\S]+)@([\\S]+)/g.exec(value);\n        let search = `${value}`.replace(/^@/, \"\");\n        let urlScheme = `${host}/-/v1/search?text=${search}&size=10&boost-exact=false`;\n        let version = \"\";\n\n        if (exec) {\n            let [, pkg, ver] = exec;\n            version = ver;\n            urlScheme = `${host}/-/v1/search?text=${pkg}&size=10&boost-exact=false`;\n        }\n\n        return { url: urlScheme, version }\n    };\n\n    let canSearch = true;\n    searchInput?.addEventListener?.(\"input\", () => {\n        if (canSearch) {\n            canSearch = false;\n\n            // Set a timeout to debounce the keyup event\n            requestAnimationFrame(() => {\n                let { value } = searchInput;\n                let { url, version } = parseInput(value);\n\n                (async () => {\n                    let response = await fetch(url);\n                    let result = await response.json();\n                    setState(\n                        result.objects.map(obj => {\n                            const { name, description, date, publisher } = obj.package;\n                            return {\n                                name, description,\n                                date, version,\n                                author: publisher.username\n                            };\n                        })\n                    );\n                })();\n\n                canSearch = true;\n            });\n        }\n    });\n\n    const { renderComponent, setState, Emitter } = await import(\"./components/SearchResults\");\n    renderComponent(document.querySelector(\".search-results-container\"));\n\n    Emitter.on(\"add-module\", (v) => {\n        let value = `` + editor?.getValue();\n        editor.setValue(value + \"\\n\" + v);\n    });\n\n    let clearBtn = document.querySelector(\".search .clear\");\n    clearBtn.addEventListener(\"click\", () => {\n        searchInput.value = \"\";\n        setState([]);\n    });\n})();\n\n// highlight.js for code highlighting\n(async () => {\n    let { hljs } = await import(\"./modules/highlightjs\");\n    hljs.highlightAll();\n})();\n\n// esbuild bundler worker\nimport ESBUILD_WORKER_URL from \"worker:./workers/esbuild.ts\";\n\n(() => {\n    let timeFormatter = new Intl.RelativeTimeFormat('en', { style: 'narrow', numeric: 'auto' });\n\n    // @ts-ignore\n    let BundleWorker = new Worker(ESBUILD_WORKER_URL, {\n        name: \"esbuild-worker\",\n        type: \"module\"\n    });\n\n    let count = 0;\n    let value = \"\";\n    let start = Date.now();\n\n    RunBtn.addEventListener(\"click\", () => {\n        value = `` + editor?.getValue();\n\n        fileSizeEl.innerHTML = `<div class=\"loading\"></div>`;\n        bundleTime.textContent = ``;\n\n        start = Date.now();\n        BundleWorker.postMessage(value);\n    });\n\n    BundleWorker.onmessage = ({ data }) => {\n        if (data.warn) {\n            console.warn(data.type + \" \\n\", data.warn);\n            fileSizeEl.textContent = `Try Again`;\n            return;\n        }\n\n        if (data.error) {\n            console.error(data.type + \" (please create a new issue in the repo)\\n\", data.error);\n            fileSizeEl.textContent = `Error`;\n            return;\n        }\n\n        let { size, content } = data.value;\n\n        if (count > 10) {\n            console.clear();\n            count = 0;\n        }\n\n        let splitInput = value.split(\"\\n\");\n        console.groupCollapsed(`${size} =>`, `${splitInput[0]}${splitInput.length > 1 ? \"\\n...\" : \"\"}`);\n        console.groupCollapsed(\"Input Code: \");\n        console.log(value);\n        console.groupEnd();\n        console.groupCollapsed(\"Bundled Code: \");\n        console.log(content);\n        console.groupEnd();\n        console.groupEnd();\n        count++;\n\n        bundleTime.textContent = `Bundled ${timeFormatter.format((Date.now() - start) / 1000, \"seconds\")}`;\n        fileSizeEl.textContent = `` + size;\n    };\n})();", "import { themeSet, themeGet } from \"../theme\";\n\nexport const build = () => {\n    try {\n        // On theme switcher button click (mouseup is a tiny bit more efficient) toggle the theme between dark and light mode\n        let themeSwitch = Array.from(document.querySelectorAll(\".theme-toggle\"));\n        if (themeSwitch[0]) {\n            for (let el of themeSwitch)\n                el.addEventListener(\"click\", () => {\n                    themeSet(themeGet() === \"dark\" ? \"light\" : \"dark\");\n                });\n        }\n    } catch (e) {\n        console.warn(\"Theming seems to break on this browser.\", e);\n    }\n\n    const navbar = document.querySelector(\".navbar\") as HTMLElement;\n\n    let canScroll = true;\n    window.addEventListener(\"scroll\", () => {\n        if (canScroll) {\n            let raf: number | void;\n            canScroll = false;\n            raf = requestAnimationFrame(() => {\n                navbar.classList.toggle(\"shadow\", window.scrollY >= 5);\n\n                canScroll = true;\n                raf = window.cancelAnimationFrame(raf as number);\n            });\n        }\n    }, { passive: true });\n};", "\n// This file is generated by esbuild to expose the worker script as a class, like Webpack's worker-loader\nexport default \"./js/esbuild.worker.js\""],
  "mappings": "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",
  "names": []
}
