var Te=e=>[].concat(...e),$=(e,t)=>{let i=Object.keys(e),a,s,r={};for(let n=0,o=i.length;n<o;n++)a=i[n],s=e[a],r[a]=t(s,a,e);return r},ne=e=>""+e,oe=e=>Array.isArray(e)||typeof e=="string"?(typeof e=="string"&&(e=e.split(",")),e):[e],x=e=>Array.isArray(e)||typeof e=="string"?Boolean(e.length):e!=null&&e!=null&&!Number.isNaN(e),qe=e=>(e=e.replace(/([A-Z])/g,t=>`-${t.toLowerCase()}`),e.charAt(0)=="-"?e.substr(1):e),de=e=>e.includes("--")?e:`${e}`.replace(/-([a-z])/g,(t,i)=>i.toUpperCase()),j=(e,t)=>{let i=[...e],a={...t};for(;i.length;){let{[i.pop()]:s,...r}=a;a=r}return a};var ze=(...e)=>{let t=0;e=e.map(s=>{let r=oe(s),n=r.length;return n>t&&(t=n),r});let i=[],a=e.length;for(let s=0;s<t;s++){i[s]=[];for(let r=0;r<a;r++){let n=e[r][s];x(n)&&(i[s][r]=n)}}return i},le=e=>typeof e=="string"?e.includes("%")?parseFloat(e)/100:e=="from"?0:e=="to"?1:parseFloat(e):e,Fe=e=>{let t=new Set,i=Object.keys(e),a=i.length;for(let s=0;s<a;s++){let r=""+i[s],n=e[r],o=r.split(","),l=o.length;for(let u=0;u<l;u++){let c=le(o[u]);t.add({...n,offset:c})}}return[...t].sort((s,r)=>s.offset-r.offset)};var ue=(e="")=>t=>typeof t=="string"?t:`${t}${e}`,G=ue(),he=ue("px"),pe=ue("deg"),_=e=>t=>x(t)?oe(t).map(i=>{if(typeof i!="number"&&typeof i!="string")return i;let a=Number(i),s=Number.isNaN(a)?typeof i=="string"?i.trim():i:a;return e(s)}):[],I=(e,t)=>oe(e).map(_(t)),M=_(G),v=_(he),k=_(pe),ye=e=>{let t=Object.keys(e),i,a,s={};for(let r=0,n=t.length;r<n;r++)i=de(t[r]),a=e[t[r]],s[i]=a;return s},be={translate:e=>I(e,he),translate3d:e=>I(e,he),translateX:e=>v(e),translateY:e=>v(e),translateZ:e=>v(e),rotate:e=>I(e,pe),rotate3d:e=>I(e,G),rotateX:e=>k(e),rotateY:e=>k(e),rotateZ:e=>k(e),scale:e=>I(e,G),scale3d:e=>I(e,G),scaleX:e=>M(e),scaleY:e=>M(e),scaleZ:e=>M(e),skew:e=>I(e,pe),skewX:e=>k(e),skewY:e=>k(e),perspective:e=>v(e)},ce=Object.keys(be),ke=(e,t)=>{let i="",a=e.length;for(let s=0;s<a;s++){let r=e[s],n=t[s];x(n)&&(i+=`${r}(${Array.isArray(n)?n.join(", "):n}) `)}return i.trim()},Ee=["margin","padding","size","width","height","left","right","top","bottom","radius","gap","basis","inset","outline-offset","perspective","thickness","position","distance","spacing"].map(de).join("|"),je=e=>{let t=ye(e),i=j(ce,t),a=Object.keys(t).filter(n=>ce.includes(n)),s=a.map(n=>be[n](t[n])),r=ze(...s).filter(x).map(n=>ke(a,n));return i=$(i,(n,o)=>{let l;if(!/color/i.test(o)){let u=/rotate/i.test(o),c=new RegExp(Ee,"i").test(o);if(u||c)return u?l=k:c&&(l=v),l(n).map(d=>{let h=d.trim().split(" ");return l(h).join(" ")})}return[].concat(n).map(ne)}),Object.assign({},x(r)?{transform:r}:null,i)},Le=e=>e.map(t=>{let{translate:i,translate3d:a,translateX:s,translateY:r,translateZ:n,rotate:o,rotate3d:l,rotateX:u,rotateY:c,rotateZ:d,scale:h,scale3d:m,scaleX:g,scaleY:E,scaleZ:p,skew:N,skewX:C,skewY:w,perspective:y,easing:f,iterations:T,offset:q,...K}=ye(t);return i=v(i),a=v(a),s=v(s)[0],r=v(r)[0],n=v(n)[0],o=k(o),l=M(l),u=k(u)[0],c=k(c)[0],d=k(d)[0],h=M(h),m=M(m),g=M(g)[0],E=M(E)[0],p=M(p)[0],N=k(N),C=k(C)[0],w=k(w)[0],y=v(y)[0],[K,i,a,s,r,n,o,l,u,c,d,h,m,g,E,p,N,C,w,y]}).map(([t,...i])=>{let a=ke(ce,i);return t=$(t,(s,r)=>{let n;if(!/color/i.test(r)){let o=/rotate/i.test(r),l=new RegExp(Ee,"i").test(r);if(o||l){o?n=k:l&&(n=v);let u=ne(s).trim().split(" ");return n(u).join(" ")}}return ne(s)}),Object.assign({},x(a)?{transform:a}:null,t)}),Ue=4,Ke=.001,Re=1e-7,$e=10,L=11,V=1/(L-1),Ge=typeof Float32Array=="function",we=(e,t)=>1-3*t+3*e,ve=(e,t)=>3*t-6*e,Se=e=>3*e,Y=(e,t,i)=>((we(t,i)*e+ve(t,i))*e+Se(t))*e,Ae=(e,t,i)=>3*we(t,i)*e*e+2*ve(t,i)*e+Se(t),_e=(e,t,i,a,s)=>{let r,n,o=0;do n=t+(i-t)/2,r=Y(n,a,s)-e,r>0?i=n:t=n;while(Math.abs(r)>Re&&++o<$e);return n},Ve=(e,t,i,a)=>{for(var s=0;s<Ue;++s){let r=Ae(t,i,a);if(r===0)return t;t-=(Y(t,i,a)-e)/r}return t},Ye=(e,t,i,a)=>{if(!(0<=e&&e<=1&&0<=i&&i<=1))throw new Error("bezier x values must be in [0, 1] range");if(e===t&&i===a)return o=>o;for(var s=Ge?new Float32Array(L):new Array(L),r=0;r<L;++r)s[r]=Y(r*V,e,i);let n=o=>{let l=0,u=1,c=L-1;for(;u!==c&&s[u]<=o;++u)l+=V;--u;let d=(o-s[u])/(s[u+1]-s[u]),h=l+d*V,m=Ae(h,e,i);return m>=Ke?Ve(o,h,e,i):m===0?h:_e(o,l,l+V,e,i)};return o=>o===0||o===1?o:Y(n(o),t,a)},Oe=Ye;var D=(e,t,i)=>Math.min(Math.max(e,t),i),X=e=>Math.pow(e,2),Z=e=>Math.pow(e,3),H=e=>Math.pow(e,4),W=e=>Math.pow(e,5),B=e=>Math.pow(e,6),Q=e=>1-Math.cos(e*Math.PI/2),J=e=>1-Math.sqrt(1-e*e),ee=e=>e*e*(3*e-2),te=e=>{let t,i=4;for(;e<((t=Math.pow(2,--i))-1)/11;);return 1/Math.pow(4,3-i)-7.5625*Math.pow((t*3-2)/22-e,2)},ie=(e,t=[])=>{let[i=1,a=.5]=t,s=D(i,1,10),r=D(a,.1,2);return e===0||e===1?e:-s*Math.pow(2,10*(e-1))*Math.sin((e-1-r/(Math.PI*2)*Math.asin(1/s))*(Math.PI*2)/r)},U=(e,t=[],i)=>{let[a=1,s=100,r=10,n=0]=t;a=D(a,.1,1e3),s=D(s,.1,1e3),r=D(r,.1,1e3),n=D(n,.1,1e3);let o=Math.sqrt(s/a),l=r/(2*Math.sqrt(s*a)),u=l<1?o*Math.sqrt(1-l*l):0,c=1,d=l<1?(l*o+-n)/u:-n+o,h=i?i*e/1e3:e;return l<1?h=Math.exp(-h*l*o)*(c*Math.cos(u*h)+d*Math.sin(u*h)):h=(c+d*h)*Math.exp(-h*o),e===0||e===1?e:1-h},it=new Map;var me=(e,t=[])=>{let[i=10,a]=t;return(a=="start"?Math.ceil:Math.floor)(D(e,0,1)*i)/i},Ne=(e,t=[])=>{let[i,a,s,r]=t;return Oe(i,a,s,r)(e)},ae=Oe(.42,0,1,1),S=e=>(t,i=[],a)=>1-e(1-t,i,a),A=e=>(t,i=[],a)=>t<.5?e(t*2,i,a)/2:1-e(t*-2+2,i,a)/2,O=e=>(t,i=[],a)=>t<.5?(1-e(1-t*2,i,a))/2:(e(t*2-1,i,a)+1)/2,Xe={steps:me,"step-start":e=>me(e,[1,"start"]),"step-end":e=>me(e,[1,"end"]),linear:e=>e,"cubic-bezier":Ne,ease:e=>Ne(e,[.25,.1,.25,1]),in:ae,out:S(ae),"in-out":A(ae),"out-in":O(ae),"in-quad":X,"out-quad":S(X),"in-out-quad":A(X),"out-in-quad":O(X),"in-cubic":Z,"out-cubic":S(Z),"in-out-cubic":A(Z),"out-in-cubic":O(Z),"in-quart":H,"out-quart":S(H),"in-out-quart":A(H),"out-in-quart":O(H),"in-quint":W,"out-quint":S(W),"in-out-quint":A(W),"out-in-quint":O(W),"in-expo":B,"out-expo":S(B),"in-out-expo":A(B),"out-in-expo":O(B),"in-sine":Q,"out-sine":S(Q),"in-out-sine":A(Q),"out-in-sine":O(Q),"in-circ":J,"out-circ":S(J),"in-out-circ":A(J),"out-in-circ":O(J),"in-back":ee,"out-back":S(ee),"in-out-back":A(ee),"out-in-back":O(ee),"in-bounce":te,"out-bounce":S(te),"in-out-bounce":A(te),"out-in-bounce":O(te),"in-elastic":ie,"out-elastic":S(ie),"in-out-elastic":A(ie),"out-in-elastic":O(ie),spring:U,"spring-in":U,"spring-out":S(U),"spring-in-out":A(U),"spring-out-in":O(U)},at=Object.keys(Xe);var st=new Map;var ge=class{constructor(e){this.map=new Map(e)}getMap(){return this.map}get(e){return this.map.get(e)}keys(){return Array.from(this.map.keys())}values(){return Array.from(this.map.values())}set(e,t){return this.map.set(e,t),this}add(e){let t=this.size;return this.set(t,e),this}get size(){return this.map.size}get length(){return this.map.size}last(e=1){let t=this.keys()[this.size-e];return this.get(t)}delete(e){return this.map.delete(e)}remove(e){return this.map.delete(e),this}clear(){return this.map.clear(),this}has(e){return this.map.has(e)}entries(){return this.map.entries()}forEach(e,t){return this.map.forEach(e,t),this}[Symbol.iterator](){return this.entries()}},Ze=(e,t,...i)=>{e.forEach(a=>{a[t](...i)})},Pe=({callback:e=()=>{},scope:t=null,name:i="event"})=>({callback:e,scope:t,name:i}),se=class extends ge{constructor(e="event"){super();this.name=e}},He=class extends ge{constructor(){super()}getEvent(e){let t=this.get(e);return t instanceof se?t:(this.set(e,new se(e)),this.get(e))}newListener(e,t,i){let a=this.getEvent(e);return a.add(Pe({name:e,callback:t,scope:i})),a}on(e,t,i){if(typeof e=="undefined"||e==null)return this;typeof e=="string"&&(e=e.trim().split(/\s/g));let a,s,r=typeof e=="object"&&!Array.isArray(e),n=r?t:i;return r||(s=t),Object.keys(e).forEach(o=>{a=r?o:e[o],r&&(s=e[o]),this.newListener(a,s,n)},this),this}removeListener(e,t,i){let a=this.get(e);if(a instanceof se&&t){let s=Pe({name:e,callback:t,scope:i});a.forEach((r,n)=>{if(r.callback===s.callback&&r.scope===s.scope)return a.remove(n)})}return a}off(e,t,i){if(typeof e=="undefined"||e==null)return this;typeof e=="string"&&(e=e.trim().split(/\s/g));let a,s,r=typeof e=="object"&&!Array.isArray(e),n=r?t:i;return r||(s=t),Object.keys(e).forEach(o=>{a=r?o:e[o],r&&(s=e[o]),typeof s=="function"?this.removeListener(a,s,n):this.remove(a)},this),this}once(e,t,i){if(typeof e=="undefined"||e==null)return this;typeof e=="string"&&(e=e.trim().split(/\s/g));let a=typeof e=="object"&&!Array.isArray(e);return Object.keys(e).forEach(s=>{let r=a?s:e[s],n=a?e[s]:t,o=a?t:i,l=(...u)=>{n.apply(o,u),this.removeListener(r,l,o)};this.newListener(r,l,o)},this),this}emit(e,...t){return typeof e=="undefined"||e==null?this:(typeof e=="string"&&(e=e.trim().split(/\s/g)),e.forEach(i=>{let a=this.get(i);a instanceof se&&a.forEach(s=>{let{callback:r,scope:n}=s;r.apply(n,t)})},this),this)}clear(){return Ze(this,"clear"),super.clear(),this}},We=e=>typeof e=="string"?Array.from(document.querySelectorAll(e)):[e],fe=e=>Array.isArray(e)?Te(e.map(fe)):typeof e=="string"||e instanceof Node?We(e):e instanceof NodeList||e instanceof HTMLCollection?Array.from(e):[],Be=(e,t,i)=>typeof e=="function"?e.apply(i,t):e,Me=(e,t,i)=>$(e,a=>Be(a,t,i)),Ce={in:"ease-in",out:"ease-out","in-out":"ease-in-out","in-sine":"cubic-bezier(0.47, 0, 0.745, 0.715)","out-sine":"cubic-bezier(0.39, 0.575, 0.565, 1)","in-out-sine":"cubic-bezier(0.445, 0.05, 0.55, 0.95)","in-quad":"cubic-bezier(0.55, 0.085, 0.68, 0.53)","out-quad":"cubic-bezier(0.25, 0.46, 0.45, 0.94)","in-out-quad":"cubic-bezier(0.455, 0.03, 0.515, 0.955)","in-cubic":"cubic-bezier(0.55, 0.055, 0.675, 0.19)","out-cubic":"cubic-bezier(0.215, 0.61, 0.355, 1)","in-out-cubic":"cubic-bezier(0.645, 0.045, 0.355, 1)","in-quart":"cubic-bezier(0.895, 0.03, 0.685, 0.22)","out-quart":"cubic-bezier(0.165, 0.84, 0.44, 1)","in-out-quart":"cubic-bezier(0.77, 0, 0.175, 1)","in-quint":"cubic-bezier(0.755, 0.05, 0.855, 0.06)","out-quint":"cubic-bezier(0.23, 1, 0.32, 1)","in-out-quint":"cubic-bezier(0.86, 0, 0.07, 1)","in-expo":"cubic-bezier(0.95, 0.05, 0.795, 0.035)","out-expo":"cubic-bezier(0.19, 1, 0.22, 1)","in-out-expo":"cubic-bezier(1, 0, 0, 1)","in-circ":"cubic-bezier(0.6, 0.04, 0.98, 0.335)","out-circ":"cubic-bezier(0.075, 0.82, 0.165, 1)","in-out-circ":"cubic-bezier(0.785, 0.135, 0.15, 0.86)","in-back":"cubic-bezier(0.6, -0.28, 0.735, 0.045)","out-back":"cubic-bezier(0.175, 0.885, 0.32, 1.275)","in-out-back":"cubic-bezier(0.68, -0.55, 0.265, 1.55)"},Qe=Object.keys(Ce),xe=(e="ease")=>{let t=qe(e).replace(/^ease-/,"");return Qe.includes(t)?Ce[t]:e},Ie={keyframes:[],offset:[],loop:1,delay:0,speed:1,endDelay:0,easing:"ease",timelineOffset:0,autoplay:!0,duration:1e3,fillMode:"none",direction:"normal",padEndDelay:!1,timeline:document.timeline,extend:{}},Je=e=>{var s;let{options:t,...i}=e,a=t instanceof re?t.options:Array.isArray(t)?(s=t==null?void 0:t[0])==null?void 0:s.options:t;return Object.assign({},a,i)},De=["easing","loop","endDelay","duration","speed","delay","timelineOffset","direction","extend","fillMode","offset"],et=["keyframes","padEndDelay","onfinish","oncancel","autoplay","target","targets","timeline"],tt=[...De,...et],b=class{constructor(e){this.options={},this.properties={},this.totalDuration=-1/0,this.minDelay=1/0,this.maxSpeed=1/0,this.emitter=new He,this.targets=new ge,this.targetIndexes=new WeakMap,this.keyframeEffects=new WeakMap,this.computedOptions=new WeakMap,this.animations=new WeakMap,this.computedKeyframes=new WeakMap,this.loop=this.loop.bind(this),this.onVisibilityChange=this.onVisibilityChange.bind(this),this.on("error",console.error),this.updateOptions(e),this.mainAnimation&&(this.visibilityPlayState=this.getPlayState(),b.pauseOnPageHidden&&document.addEventListener("visibilitychange",this.onVisibilityChange,!1)),this.newPromise()}static requestFrame(){b.cancelFrame(),b.RUNNING.forEach(e=>{e.emitter.getEvent("update").length<=0?e.stopLoop():e.loop()}),b.RUNNING.size>0?b.animationFrame=window.requestAnimationFrame(b.requestFrame):b.cancelFrame()}static cancelFrame(){window.cancelAnimationFrame(b.animationFrame),b.animationFrame=null}loop(){this.emit("update",this.getProgress(),this)}stopLoop(){b.RUNNING.delete(this)}onVisibilityChange(){document.hidden?(this.visibilityPlayState=this.getPlayState(),this.is("running")&&(this.loop(),this.pause())):this.visibilityPlayState=="running"&&this.is("paused")&&this.play()}newPromise(){return this.promise=new Promise((e,t)=>{var i,a,s,r;(a=(i=this.emitter)==null?void 0:i.once)==null||a.call(i,"finish",()=>e([this])),(r=(s=this.emitter)==null?void 0:s.once)==null||r.call(s,"error",n=>t(n))}),this.promise}then(e,t){var i,a;return e=e==null?void 0:e.bind(this),t=t==null?void 0:t.bind(this),(a=(i=this.promise)==null?void 0:i.then)==null||a.call(i,e,t),this}catch(e){var t,i;return e=e==null?void 0:e.bind(this),(i=(t=this.promise)==null?void 0:t.catch)==null||i.call(t,e),this}finally(e){var t,i;return e=e==null?void 0:e.bind(this),(i=(t=this.promise)==null?void 0:t.finally)==null||i.call(t,e),this}allAnimations(e){return this.targets.forEach(t=>{let i=this.keyframeEffects.get(t),a=this.animations.get(i);return e(a,t)}),this}all(e){return this.mainAnimation&&e(this.mainAnimation,this.mainElement),this.allAnimations(e),this}beginEvent(){this.getProgress()==0&&this.emit("begin",this)}play(){let e=this.getPlayState();return this.beginEvent(),this.all(t=>t.play()),this.emit("play",e,this),this.is(e)||this.emit("playstate-change",e,this),this.loop(),b.RUNNING.add(this),b.requestFrame(),this}pause(){let e=this.getPlayState();return this.all(t=>t.pause()),this.emit("pause",e,this),this.is(e)||this.emit("playstate-change",e,this),this.stopLoop(),this}reverse(){return this.all(e=>e.reverse()),this}reset(){return this.setProgress(0),this.options.autoplay?this.play():this.pause(),this}cancel(){return this.all(e=>e.cancel()),this}finish(){return this.all(e=>e.finish()),this}stop(){var e,t;this.cancel(),this.stopLoop(),document.removeEventListener("visibilitychange",this.onVisibilityChange,!1),this.targets.forEach(i=>this.removeTarget(i)),this.emit("stop"),this.emitter.clear(),this.mainkeyframeEffect=null,this.mainAnimation=null,(t=(e=this.mainElement)==null?void 0:e.remove)==null||t.call(e),this.mainElement=null,this.promise=null,this.computedOptions=null,this.animations=null,this.keyframeEffects=null,this.emitter=null,this.targets=null,this.options=null,this.properties=null}getAnimation(e){let t=this.keyframeEffects.get(e);return this.animations.get(t)}getTiming(e){var a,s,r,n;let t=(a=this.computedOptions.get(e))!=null?a:{},i=(n=(r=(s=this.keyframeEffects.get(e)).getTiming)==null?void 0:r.call(s))!=null?n:{};return{...t,...i}}getCurrentTime(){return this.mainAnimation.currentTime}getProgress(){return this.getCurrentTime()/this.totalDuration*100}getSpeed(){return this.mainAnimation.playbackRate}getPlayState(){return this.mainAnimation.playState}is(e){return this.getPlayState()==e}setCurrentTime(e){return this.all(t=>t.currentTime=e),this.emit("update",this.getProgress()),this}setProgress(e){let t=e/100*this.totalDuration;return this.setCurrentTime(t),this}setSpeed(e=1){return this.maxSpeed=e,this.all(t=>{t.updatePlaybackRate?t.updatePlaybackRate(e):t.playbackRate=e}),this}createArrayOfComputedOptions(e,t){let i=[];return this.targets.forEach((a,s)=>{var N,C;let r=(N=this.computedOptions.get(a))!=null?N:{},n=w=>{var f,T,q;let y=w;return w=="loop"&&(y="iterations"),w=="fillMode"&&(y="fill"),(q=(T=(f=e[w])!=null?f:r[y])!=null?T:this.options[w])!=null?q:Ie[w]},o=Object.assign({easing:n("easing"),iterations:n("loop"),direction:n("direction"),endDelay:n("endDelay"),duration:n("duration"),speed:n("speed"),delay:n("delay"),timelineOffset:n("timelineOffset"),keyframes:n("keyframes")},(C=n("extend"))!=null?C:{}),l=Me(o,[s,t,a],this);typeof l.easing=="string"&&(l.easing=xe(l.easing)),l.iterations===!0&&(l.iterations=1/0),l.fill=n("fillMode");let{timelineOffset:u,speed:c,endDelay:d,delay:h,duration:m,iterations:g,...E}=l;g=Number(g),m=Number(m),d=Number(d),c=Number(c),h=Number(h)+Number(u);let p=h+m*g+d;this.totalDuration<p&&(this.totalDuration=p),i[s]={...E,speed:c,tempDurations:p,endDelay:d,delay:h,duration:m,iterations:g},this.minDelay>h&&(this.minDelay=h),this.maxSpeed>c&&(this.maxSpeed=c)}),i}createAnimations(e,t){let{arrOfComputedOptions:i,padEndDelay:a,oldCSSProperties:s,onfinish:r,oncancel:n,timeline:o}=e;this.targets.forEach((l,u)=>{var T,q,K;let{speed:c,keyframes:d,tempDurations:h,...m}=i[u];a&&m.endDelay==0&&Math.abs(m.iterations)!=Math.abs(1/0)&&(m.endDelay=this.totalDuration-h);let g,E,p=d;typeof p=="object"&&(p=Fe(p));let N=(T=this.computedKeyframes.get(l))!=null?T:{},C=Object.assign({},s,N),w=$(C,(F,z)=>{var P;return(P=this.properties[z])!=null?P:F});if(E=x(p)?p:w,Array.isArray(E))g=E.map(F=>{let{easing:z,offset:P,...R}=j(["speed","loop"],F);return Object.assign({},R,typeof z=="string"?{easing:xe(z)}:null,typeof P=="string"||typeof P=="number"?{offset:le(P)}:null)}),g=Le(g);else{let F=j(["keyframes"],E),{offset:z,...P}=Me(F,[u,t,l],this);P=je(P);let R=z;g=Object.assign({},P,x(R)?{offset:R.map(le)}:null)}let y,f;this.keyframeEffects.has(l)?(f=this.keyframeEffects.get(l),y=this.animations.get(f),(q=f==null?void 0:f.setKeyframes)==null||q.call(f,g),(K=f==null?void 0:f.updateTiming)==null||K.call(f,m)):(f=new KeyframeEffect(l,g,m),y=new Animation(f,o),this.keyframeEffects.set(l,f),this.animations.set(f,y)),y.playbackRate=c,y.onfinish=()=>{typeof r=="function"&&r.call(this,l,u,t,y)},y.oncancel=()=>{typeof n=="function"&&n.call(this,l,u,t,y)},this.computedOptions.set(l,m),this.computedKeyframes.set(l,g)})}updateOptions(e={}){var t,i;try{let a=Je(e);this.options=Object.assign({},Ie,this.options,a);let{padEndDelay:s,autoplay:r,target:n,targets:o,timeline:l,onfinish:u,oncancel:c,...d}=j(De,this.options);this.properties=j(tt,a);let h=this.targets.values(),m=[...new Set([...h,...fe(o),...fe(n)])];this.targets.clear(),m.forEach((p,N)=>{this.targets.set(N,p),this.targetIndexes.set(p,N)});let g=this.targets.size,E=this.createArrayOfComputedOptions(a,g);if(this.createAnimations({arrOfComputedOptions:E,padEndDelay:s,oldCSSProperties:d,onfinish:u,oncancel:c,timeline:l},g),g<=0&&(this.maxSpeed==1/0&&(this.maxSpeed=Number(this.options.speed)),this.minDelay==1/0&&(this.minDelay=Number(this.options.delay)+Number(this.options.timelineOffset)),this.totalDuration==-1/0&&(this.totalDuration=Number(this.options.duration))),this.mainAnimation?((i=(t=this.mainkeyframeEffect)==null?void 0:t.updateTiming)==null||i.call(t,{duration:this.totalDuration}),(!this.mainkeyframeEffect.setKeyframes||!this.mainkeyframeEffect.updateTiming)&&console.warn("@okikio/animate - `KeyframeEffect.setKeyframes` and/or `KeyframeEffect.updateTiming` are not supported in this browser.")):(this.mainkeyframeEffect=new KeyframeEffect(this.mainElement,null,{duration:this.totalDuration}),this.mainAnimation=new Animation(this.mainkeyframeEffect,l)),this.mainAnimation.playbackRate=this.maxSpeed,this.mainAnimation.onfinish=()=>{if(this.mainAnimation){let p=this.getPlayState();this.is(p)||this.emit("playstate-change",p,this),this.loop(),this.stopLoop()}this.emit("finish",this)},this.mainAnimation.oncancel=()=>{if(this.mainAnimation){let p=this.getPlayState();this.is(p)||this.emit("playstate-change",p,this),this.loop(),this.stopLoop()}this.emit("cancel",this)},r){let p=window.setTimeout(()=>{this.emit("begin",this),p=window.clearTimeout(p)},0);this.play()}else this.pause()}catch(a){this.emit("error",a)}}add(e){let t=this.getProgress(),i=this.is("running"),a=this.is("paused");this.updateOptions({target:e}),this.setProgress(t),i?this.play():a&&this.pause()}removeTarget(e){let t=this.keyframeEffects.get(e);this.animations.delete(t),t=null,this.computedKeyframes.delete(e),this.computedOptions.delete(e),this.keyframeEffects.delete(e);let i=this.targetIndexes.get(e);this.targets.delete(i),this.targetIndexes.delete(e)}remove(e){this.removeTarget(e);let t=new Set([].concat(this.targets.values()));this.options.target=[...t],this.options.targets=[],t.clear(),t=null;let i=this.getProgress(),a=this.is("running"),s=this.is("paused");this.updateOptions(),a?this.play():s&&this.pause(),this.setProgress(i)}on(e,t,i){var a,s;return(s=(a=this.emitter)==null?void 0:a.on)==null||s.call(a,e,t,i!=null?i:this),this.emitter.getEvent("update").length>0&&(b.RUNNING.add(this),b.animationFrame==null&&b.requestFrame()),this}off(e,t,i){var a,s;return(s=(a=this.emitter)==null?void 0:a.off)==null||s.call(a,e,t,i!=null?i:this),this}emit(e,...t){var i,a;return(a=(i=this.emitter)==null?void 0:i.emit)==null||a.call(i,e,...t),this}toJSON(){return this.options}get[Symbol.toStringTag](){return"Animate"}},re=b;re.pauseOnPageHidden=!0,re.RUNNING=new Set;var rt=(e={})=>new re(e);export{rt as a};
//# sourceMappingURL=chunk-V2Z4G4KC.js.map
