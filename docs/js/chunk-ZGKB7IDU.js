var $t=e=>[].concat(...e),Gt=e=>typeof e=="object"&&!Array.isArray(e)&&typeof e!="function";var U=(e,t)=>{let i,s,a=Object.keys(e),n={};for(let r=0,o=a.length;r<o;r++)i=a[r],s=e[i],n[i]=t(s,i,e);return n},_=e=>""+e,Wt=e=>{let t=parseFloat(e);return _(e).replace(_(t),"")},Bt=e=>_(e).trim(),ht=(e,t="split")=>Array.isArray(e)||typeof e=="string"&&t=="split"?(typeof e=="string"&&(e=e.split(/\s+/)),e):[e],D=e=>Array.isArray(e)||typeof e=="string"?Boolean(e.length):e!=null&&e!=null&&!Number.isNaN(e),kt=e=>(e=e.replace(/([A-Z])/g,t=>`-${t.toLowerCase()}`)).charAt(0)=="-"?e.substr(1):e,xt=e=>e.includes("--")?e:`${e}`.replace(/-([a-z])/g,(t,i)=>i.toUpperCase()),v=(e,t)=>{let i=[...e],s={...t};for(;i.length;){let{[i.pop()]:a,...n}=s;s=n}return s};var Z=(...e)=>{let t=0,i=[],s=(e=e.map(a=>{let n=ht(a),r=n.length;return r>t&&(t=r),n})).length;for(let a=0;a<t;a++){i[a]=[];for(let n=0;n<s;n++){let r=e[n][a];D(r)&&(i[a][n]=r)}}return i},ct=e=>typeof e=="string"?e.includes("%")?parseFloat(e)/100:e=="from"?0:e=="to"?1:parseFloat(e):e,Ht=e=>{let t=new Set,i=Object.keys(e),s=i.length;for(let a=0;a<s;a++){let n=""+i[a],r=e[n],o=n.split(","),l=o.length;for(let u=0;u<l;u++){let h=ct(o[u]);t.add({...r,offset:h})}}return[...t].sort((a,n)=>a.offset-n.offset)};var R=class{constructor(t){this.map=new Map(t)}getMap(){return this.map}get(t){return this.map.get(t)}keys(){return Array.from(this.map.keys())}values(){return Array.from(this.map.values())}set(t,i){return this.map.set(t,i),this}add(t){let i=this.size;return this.set(i,t),this}get size(){return this.map.size}get length(){return this.map.size}last(t=1){let i=this.keys()[this.size-t];return this.get(i)}delete(t){return this.map.delete(t)}remove(t){return this.map.delete(t),this}clear(){return this.map.clear(),this}has(t){return this.map.has(t)}entries(){return this.map.entries()}forEach(t,i){return this.map.forEach(t,i),this}[Symbol.iterator](){return this.entries()}},mt=(e="")=>t=>typeof t=="string"?t:`${t}${e}`,$=mt(),pt=mt("px"),ft=mt("deg"),G=e=>t=>D(t)?ht(t).map(i=>{if(typeof i!="number"&&typeof i!="string")return i;let s=Number(i),a=Number.isNaN(s)?typeof i=="string"?i.trim():i:s;return e(a)}):[],F=(e,t)=>ht(e).map(G(t)),N=G($),A=G(pt),w=G(ft),pe=new R,W={translate3d:["--translate3d0","--translate3d1","--translate3d2"],translate:["--translate0","--translate1"],translateX:"--translateX",translateY:"--translateY",translateZ:"--translateZ",rotate3d:["--rotate3d0","--rotate3d1","--rotate3d2","--rotate3d3"],rotate:"--rotate",rotateX:"--rotateX",rotateY:"--rotateY",rotateZ:"--rotateZ",scale3d:["--scale3d0","--scale3d1","--scale3d2"],scale:["--scale0","--scale1"],scaleX:"--scaleX",scaleY:"--scaleY",scaleZ:"--scaleZ",skew:["--skew0","--skew1"],skewX:"--skewX",skewY:"--skewY",perspective:"--perspective"},Y="registerProperty"in CSS,B=Object.keys(W),Xt;window.RegisteredCSSVars=(Xt=window.RegisteredCSSVars)!=null?Xt:{};var It=(e={})=>Object.keys(e).filter(t=>B.includes(t)).map(t=>{if(!Y)return"";let i=[].concat(W[t]);return i.forEach(s=>{if(window.RegisteredCSSVars[s])return;let a={name:s,inherits:!1};/translate|perspective/i.test(s)?CSS.registerProperty({...a,syntax:"<length-percentage>",initialValue:"0px"}):/rotate3d3|skew/i.test(s)?CSS.registerProperty({...a,syntax:"<angle>",initialValue:"0deg"}):/scale|rotate3d/i.test(s)?CSS.registerProperty({...a,syntax:"<number>",initialValue:/rotate3d/i.test(s)?0:1}):/rotate/i.test(s)&&CSS.registerProperty({...a,syntax:"<angle>",initialValue:"0deg"}),window.RegisteredCSSVars[s]=!0}),`${t}(${i.map(s=>`var(${s})`)})`}).join(" "),Pt=(e={})=>{let t={};return B.forEach(i=>{if(!(i in e))return;let s=[].concat(e[i]).filter(o=>D(o)).map(o=>typeof o=="string"&&/\s/.test(o.trim())?o.split(/\s+/):o);if(s.length==0)return;let a=[].concat(W[i]),n=s.every(o=>Array.isArray(o)),r=s.length==1&&i=="scale";a.forEach((o,l)=>{let u=r?0:l,h=n?Z(...s)[u]:s;if(D(h)){let c=o;/translate|perspective/i.test(c)?h=A(h):/rotate3d3|skew/i.test(c)?h=w(h):/scale|rotate3d/i.test(c)||/rotate/i.test(c)&&(h=w(h)),t[o]=h}})}),t},Qt=typeof Float32Array=="function",Dt=(e,t)=>1-3*t+3*e,Mt=(e,t)=>3*t-6*e,Ct=e=>3*e,H=(e,t,i)=>((Dt(t,i)*e+Mt(t,i))*e+Ct(t))*e,Nt=(e,t,i)=>3*Dt(t,i)*e*e+2*Mt(t,i)*e+Ct(t),vt=(e,t,i,s)=>{if(!(0<=e&&e<=1&&0<=i&&i<=1))throw new Error("bezier x values must be in [0, 1] range");if(e===t&&i===s)return o=>o;for(var a=Qt?new Float32Array(11):new Array(11),n=0;n<11;++n)a[n]=H(.1*n,e,i);let r=o=>{let l=0,u=1;for(;u!==10&&a[u]<=o;++u)l+=.1;--u;let h=l+.1*((o-a[u])/(a[u+1]-a[u])),c=Nt(h,e,i);return c>=.001?((y,p,E,O)=>{for(var m=0;m<4;++m){let d=Nt(p,E,O);if(d===0)return p;p-=(H(p,E,O)-y)/d}return p})(o,h,e,i):c===0?h:((y,p,E,O,m)=>{let d,f,b=0;do f=p+(E-p)/2,d=H(f,O,m)-y,d>0?E=f:p=f;while(Math.abs(d)>1e-7&&++b<10);return f})(o,l,l+.1,e,i)};return o=>o===0||o===1?o:H(r(o),t,s)},T=(e,t,i)=>Math.min(Math.max(e,t),i),Q=e=>Math.pow(e,2),J=e=>Math.pow(e,3),tt=e=>Math.pow(e,4),et=e=>Math.pow(e,5),it=e=>Math.pow(e,6),st=e=>1-Math.cos(e*Math.PI/2),at=e=>1-Math.sqrt(1-e*e),nt=e=>e*e*(3*e-2),rt=e=>{let t,i=4;for(;e<((t=Math.pow(2,--i))-1)/11;);return 1/Math.pow(4,3-i)-7.5625*Math.pow((3*t-2)/22-e,2)},ot=(e,t=[])=>{let[i=1,s=.5]=t,a=T(i,1,10),n=T(s,.1,2);return e===0||e===1?e:-a*Math.pow(2,10*(e-1))*Math.sin((e-1-n/(2*Math.PI)*Math.asin(1/a))*(2*Math.PI)/n)},K=(e,t=[],i)=>{let[s=1,a=100,n=10,r=0]=t;s=T(s,.1,1e3),a=T(a,.1,1e3),n=T(n,.1,1e3),r=T(r,.1,1e3);let o=Math.sqrt(a/s),l=n/(2*Math.sqrt(a*s)),u=l<1?o*Math.sqrt(1-l*l):0,h=l<1?(l*o-r)/u:-r+o,c=i?i*e/1e3:e;return c=l<1?Math.exp(-c*l*o)*(1*Math.cos(u*c)+h*Math.sin(u*c)):(1+h*c)*Math.exp(-c*o),e===0||e===1?e:1-c},fe=new Map;var dt=(e,t=[])=>{let[i=10,s]=t;return(s=="start"?Math.ceil:Math.floor)(T(e,0,1)*i)/i},Tt=(e,t=[])=>{let[i,s,a,n]=t;return vt(i,s,a,n)(e)},lt=vt(.42,0,1,1),k=e=>(t,i=[],s)=>1-e(1-t,i,s),x=e=>(t,i=[],s)=>t<.5?e(2*t,i,s)/2:1-e(-2*t+2,i,s)/2,I=e=>(t,i=[],s)=>t<.5?(1-e(1-2*t,i,s))/2:(e(2*t-1,i,s)+1)/2,Jt={steps:dt,"step-start":e=>dt(e,[1,"start"]),"step-end":e=>dt(e,[1,"end"]),linear:e=>e,"cubic-bezier":Tt,ease:e=>Tt(e,[.25,.1,.25,1]),in:lt,out:k(lt),"in-out":x(lt),"out-in":I(lt),"in-quad":Q,"out-quad":k(Q),"in-out-quad":x(Q),"out-in-quad":I(Q),"in-cubic":J,"out-cubic":k(J),"in-out-cubic":x(J),"out-in-cubic":I(J),"in-quart":tt,"out-quart":k(tt),"in-out-quart":x(tt),"out-in-quart":I(tt),"in-quint":et,"out-quint":k(et),"in-out-quint":x(et),"out-in-quint":I(et),"in-expo":it,"out-expo":k(it),"in-out-expo":x(it),"out-in-expo":I(it),"in-sine":st,"out-sine":k(st),"in-out-sine":x(st),"out-in-sine":I(st),"in-circ":at,"out-circ":k(at),"in-out-circ":x(at),"out-in-circ":I(at),"in-back":nt,"out-back":k(nt),"in-out-back":x(nt),"out-in-back":I(nt),"in-bounce":rt,"out-bounce":k(rt),"in-out-bounce":x(rt),"out-in-bounce":I(rt),"in-elastic":ot,"out-elastic":k(ot),"in-out-elastic":x(ot),"out-in-elastic":I(ot),spring:K,"spring-in":K,"spring-out":k(K),"spring-in-out":x(K),"spring-out-in":I(K)},de=Object.keys(Jt);var te=(e,t,i)=>t+(i-t)*e,ee=(e,t)=>Math.round(e*10**t)/10**t,ie=(e,t,i=3)=>{let s=t.length-1,a=T(Math.floor(e*s),0,s-1),n=t[a],r=t[a+1];return ee(te((e-a/s)*s,n,r),i)},se=e=>{let t=parseFloat(e);return typeof t=="number"&&!Number.isNaN(t)};var ae=(e,t,i=3)=>{let s="";return se(t[0])&&(s=Wt(t[0])),ie(e,t.map(a=>typeof a=="number"?a:parseFloat(a)),i)+s};var ge=new Map;var Ft={translate:e=>F(e,pt),translate3d:e=>F(e,pt),translateX:e=>A(e),translateY:e=>A(e),translateZ:e=>A(e),rotate:e=>F(e,ft),rotate3d:e=>F(e,$),rotateX:e=>w(e),rotateY:e=>w(e),rotateZ:e=>w(e),scale:e=>F(e,$),scale3d:e=>F(e,$),scaleX:e=>N(e),scaleY:e=>N(e),scaleZ:e=>N(e),skew:e=>F(e,ft),skewX:e=>w(e),skewY:e=>w(e),perspective:e=>A(e)},gt=Object.keys(Ft),yt=e=>{let t,i,s=Object.keys(e),a={};for(let n=0,r=s.length;n<r;n++)t=xt(s[n]),i=e[s[n]],a[t]=i;return a},jt=(e,t)=>{let i="",s=e.length;for(let a=0;a<s;a++){let n=e[a],r=t[a];D(r)&&(i+=`${n}(${Array.isArray(r)?r.join(", "):r}) `)}return i.trim()},zt=["margin","padding","size","width","height","left","right","top","bottom","radius","gap","basis","inset","outline-offset","translate","perspective","thickness","position","distance","spacing"].map(xt).join("|"),Rt=(e,t)=>(t=t!=null?t:Math.max(...e.map(i=>i.length)),e.map(i=>{let s=i.length;return i.every(a=>Array.isArray(a))?Z(...Rt(Z(...i),t)):s!==t?Array.from(Array(t),(a,n)=>{let r=s==1?Array(2).fill(i[0]):i;return ae(n/(t-1),r)}):i})),ne=e=>{let t,i,s=yt(e);if(Y)t=Object.assign({},Pt(s),v(B,s));else{let a=Object.keys(s).filter(r=>gt.includes(r)),n=a.map(r=>Ft[r](s[r]));n=Rt(n),i=Z(...n).filter(D).map(r=>jt(a,r)),t=v(gt,s)}return t=U(t,(a,n)=>{let r;if(!/color|shadow/i.test(n)){let o=/rotate/i.test(n),l=new RegExp(zt,"i").test(n)||CSS.supports(kt(n),"1px");if(o||l)return o?r=w:l&&(r=A),r(a).map(u=>{let h=Bt(u).split(/\s+/);return r(h).join(" ")})}return[].concat(a).map(_)}),Object.assign({},D(i)?{transform:i}:null,t)},re=e=>e.map(t=>{let i=yt(t);if(Y)return{rest:Object.assign({},Pt(i),v(B,i)),transformFunctions:null};let{translate:s,translate3d:a,translateX:n,translateY:r,translateZ:o,rotate:l,rotate3d:u,rotateX:h,rotateY:c,rotateZ:y,scale:p,scale3d:E,scaleX:O,scaleY:m,scaleZ:d,skew:f,skewX:b,skewY:g,perspective:C,...j}=i;return s=A(s),a=A(a),n=A(n)[0],r=A(r)[0],o=A(o)[0],l=w(l),u=N(u),h=w(h)[0],c=w(c)[0],y=w(y)[0],p=N(p),E=N(E),O=N(O)[0],m=N(m)[0],d=N(d)[0],f=w(f),b=w(b)[0],g=w(g)[0],C=A(C)[0],{rest:j,transformFunctions:[a,s,n,r,o,u,l,h,c,y,E,p,O,m,d,f,b,g,C]}}).map(({rest:t,transformFunctions:i})=>{let s=Y?null:jt(gt,i);return t=U(t,(a,n)=>{let r;if(a=_(a),!/color|shadow/i.test(n)){let o=/rotate/i.test(n),l=new RegExp(zt,"i").test(n);if(o||l)return o?r=w:l&&(r=A),r(a).join(" ")}return a}),Object.assign({},D(s)?{transform:s}:null,t)}),qt=({callback:e=()=>{},scope:t=null,name:i="event"})=>({callback:e,scope:t,name:i}),V=class extends R{constructor(t="event"){super(),this.name=t}},bt=e=>typeof e=="object"&&!Array.isArray(e)&&typeof e!="function",Lt=class extends R{constructor(){super()}getEvent(t){let i=this.get(t);return i instanceof V?i:(this.set(t,new V(t)),this.get(t))}newListener(t,i,s){let a=this.getEvent(t);return a.add(qt({name:t,callback:i,scope:s})),a}on(t,i,s){if(t==null||t==null)return this;typeof t=="string"&&(t=t.trim().split(/\s+/));let a,n,r=bt(t),o=r?i:s;return r||(n=i),Object.keys(t).forEach(l=>{a=r?l:t[l],r&&(n=t[l]),this.newListener(a,n,o)},this),this}removeListener(t,i,s){let a=this.get(t);if(a instanceof V&&i){let n=qt({name:t,callback:i,scope:s});a.forEach((r,o)=>{if(r.callback===n.callback&&r.scope===n.scope)return a.remove(o)})}return a}off(t,i,s){if(t==null||t==null)return this;typeof t=="string"&&(t=t.trim().split(/\s+/));let a,n,r=bt(t),o=r?i:s;return r||(n=i),Object.keys(t).forEach(l=>{a=r?l:t[l],r&&(n=t[l]),typeof n=="function"?this.removeListener(a,n,o):this.remove(a)},this),this}once(t,i,s){if(t==null||t==null)return this;typeof t=="string"&&(t=t.trim().split(/\s+/));let a=bt(t);return Object.keys(t).forEach(n=>{let r=a?n:t[n],o=a?t[n]:i,l=a?i:s,u=(...h)=>{o.apply(l,h),this.removeListener(r,u,l)};this.newListener(r,u,l)},this),this}emit(t,...i){return t==null||t==null||(typeof t=="string"&&(t=t.trim().split(/\s+/)),t.forEach(s=>{let a=this.get(s);a instanceof V&&a.forEach(n=>{let{callback:r,scope:o}=n;r.apply(o,i)})},this)),this}clear(){return((t,i,...s)=>{t.forEach(a=>{a[i](...s)})})(this,"clear"),super.clear(),this}},oe=e=>typeof e=="string"?Array.from(document.querySelectorAll(e)):[e],Et=e=>Array.isArray(e)?$t(e.map(Et)):typeof e=="string"||e instanceof Node?oe(e):e instanceof NodeList||e instanceof HTMLCollection?Array.from(e):[],le=(e,t,i)=>typeof e=="function"?e.apply(i,t):e,_t=(e,t,i)=>U(e,s=>le(s,t,i)),Yt={in:"ease-in",out:"ease-out","in-out":"ease-in-out","in-sine":"cubic-bezier(0.47, 0, 0.745, 0.715)","out-sine":"cubic-bezier(0.39, 0.575, 0.565, 1)","in-out-sine":"cubic-bezier(0.445, 0.05, 0.55, 0.95)","in-quad":"cubic-bezier(0.55, 0.085, 0.68, 0.53)","out-quad":"cubic-bezier(0.25, 0.46, 0.45, 0.94)","in-out-quad":"cubic-bezier(0.455, 0.03, 0.515, 0.955)","in-cubic":"cubic-bezier(0.55, 0.055, 0.675, 0.19)","out-cubic":"cubic-bezier(0.215, 0.61, 0.355, 1)","in-out-cubic":"cubic-bezier(0.645, 0.045, 0.355, 1)","in-quart":"cubic-bezier(0.895, 0.03, 0.685, 0.22)","out-quart":"cubic-bezier(0.165, 0.84, 0.44, 1)","in-out-quart":"cubic-bezier(0.77, 0, 0.175, 1)","in-quint":"cubic-bezier(0.755, 0.05, 0.855, 0.06)","out-quint":"cubic-bezier(0.23, 1, 0.32, 1)","in-out-quint":"cubic-bezier(0.86, 0, 0.07, 1)","in-expo":"cubic-bezier(0.95, 0.05, 0.795, 0.035)","out-expo":"cubic-bezier(0.19, 1, 0.22, 1)","in-out-expo":"cubic-bezier(1, 0, 0, 1)","in-circ":"cubic-bezier(0.6, 0.04, 0.98, 0.335)","out-circ":"cubic-bezier(0.075, 0.82, 0.165, 1)","in-out-circ":"cubic-bezier(0.785, 0.135, 0.15, 0.86)","in-back":"cubic-bezier(0.6, -0.28, 0.735, 0.045)","out-back":"cubic-bezier(0.175, 0.885, 0.32, 1.275)","in-out-back":"cubic-bezier(0.68, -0.55, 0.265, 1.55)"},ue=Object.keys(Yt),Ot=(e="ease")=>{let t=kt(e).replace(/^ease-/,"");return ue.includes(t)?Yt[t]:e},q={keyframes:[],offset:[],loop:1,delay:0,speed:1,endDelay:0,easing:"ease",timelineOffset:0,autoplay:!0,duration:1e3,fillMode:"none",direction:"normal",padEndDelay:!1,timeline:document.timeline,extend:{}},ut=e=>{var a;let{options:t,...i}=e,s=t instanceof M?t.options:Array.isArray(t)?(a=t==null?void 0:t[0])==null?void 0:a.options:t;return Object.assign({},s,i)},Kt=["easing","loop","endDelay","duration","speed","delay","timelineOffset","direction","extend","fillMode","composite"],he=["keyframes","padEndDelay","onfinish","oncancel","autoplay","target","targets","timeline"],ce=[...Kt,...he],S=class{constructor(e={}){this.options={},this.initialOptions={},this.properties={},this.totalDuration=0,this.totalDurationOptions={},this.maxDuration=0,this.minDelay=1/0,this.maxSpeed=1/0,this.maxEndDelay=0,this.timelineOffset=0,this.emitter=new Lt,this.targets=new R,this.targetIndexes=new WeakMap,this.keyframeEffects=new WeakMap,this.computedOptions=new WeakMap,this.animations=new WeakMap,this.computedKeyframes=new WeakMap,this.loop=this.loop.bind(this),this.onVisibilityChange=this.onVisibilityChange.bind(this),this.on("error",console.error),this.updateOptions(e),this.mainAnimation&&(this.visibilityPlayState=this.getPlayState(),S.pauseOnPageHidden&&document.addEventListener("visibilitychange",this.onVisibilityChange,!1)),this.newPromise()}static requestFrame(e=0){let t=1e3/S.FRAME_RATE,i=e-S.FRAME_START_TIME;i>t&&(S.FRAME_START_TIME=e-i%t,S.RUNNING.forEach(s=>{s.emitter.getEvent("update").length<=0?s.stopLoop():s.loop()})),S.RUNNING.size>0?S.animationFrame=window.requestAnimationFrame(S.requestFrame):S.cancelFrame()}static cancelFrame(){window.cancelAnimationFrame(S.animationFrame),S.animationFrame=null}loop(){this.emit("update",this.getProgress(),this)}stopLoop(){S.RUNNING.delete(this)}onVisibilityChange(){document.hidden?(this.visibilityPlayState=this.getPlayState(),this.is("running")&&(this.loop(),this.pause())):this.visibilityPlayState=="running"&&this.is("paused")&&this.play()}newPromise(){return this.promise=new Promise((e,t)=>{var i,s,a,n;(s=(i=this.emitter)==null?void 0:i.once)==null||s.call(i,"finish",()=>e([this])),(n=(a=this.emitter)==null?void 0:a.once)==null||n.call(a,"error",r=>t(r))}),this.promise}then(e,t){var i,s;return e=e==null?void 0:e.bind(this),t=t==null?void 0:t.bind(this),(s=(i=this.promise)==null?void 0:i.then)==null||s.call(i,e,t),this}catch(e){var t,i;return e=e==null?void 0:e.bind(this),(i=(t=this.promise)==null?void 0:t.catch)==null||i.call(t,e),this}finally(e){var t,i;return e=e==null?void 0:e.bind(this),(i=(t=this.promise)==null?void 0:t.finally)==null||i.call(t,e),this}allAnimations(e){return this.targets.forEach(t=>{let i=this.keyframeEffects.get(t),s=this.animations.get(i);return e(s,t)}),this}all(e){return this.mainAnimation&&e(this.mainAnimation,this.mainElement),this.allAnimations(e),this}beginEvent(){this.getProgress()==0&&this.emit("begin",this)}play(){let e=this.getPlayState();return this.beginEvent(),this.all(t=>t.play()),this.emit("play",e,this),this.emit("playstate-change",e,this),this.loop(),S.RUNNING.add(this),S.requestFrame(),this}pause(){let e=this.getPlayState();return this.all(t=>t.pause()),this.emit("pause",e,this),this.emit("playstate-change",e,this),this.stopLoop(),this}reverse(){return this.all(e=>e.reverse()),this}reset(){return this.setProgress(0),this.options.autoplay?this.play():this.pause(),this}commitStyles(){return this.all(e=>e==null?void 0:e.commitStyles()),this}persist(){return this.all(e=>e==null?void 0:e.persist()),this}cancel(){return this.all(e=>e.cancel()),this}finish(){return this.all(e=>e.finish()),this}stop(){var e,t;this.cancel(),this.stopLoop(),document.removeEventListener("visibilitychange",this.onVisibilityChange,!1),this.targets.forEach(i=>this.removeTarget(i)),this.emit("stop"),this.emitter.clear(),this.mainkeyframeEffect=null,this.mainAnimation=null,(t=(e=this.mainElement)==null?void 0:e.remove)==null||t.call(e),this.mainElement=null,this.promise=null,this.computedOptions=null,this.animations=null,this.keyframeEffects=null,this.emitter=null,this.targets=null,this.options=null,this.properties=null}getAnimation(e){let t=this.keyframeEffects.get(e);return this.animations.get(t)}getTiming(e){var t,i,s,a;return{...(t=this.computedOptions.get(e))!=null?t:{},...(a=(s=(i=this.keyframeEffects.get(e)).getTiming)==null?void 0:s.call(i))!=null?a:{}}}getCurrentTime(){return this.mainAnimation.currentTime}getProgress(){return this.getCurrentTime()/this.totalDuration*100}getSpeed(){return this.mainAnimation.playbackRate}getPlayState(){return this.mainAnimation.playState}is(e){return this.getPlayState()==e}setCurrentTime(e){return this.all(t=>t.currentTime=e),this.emit("update",this.getProgress()),this}setProgress(e){let t=e/100*this.totalDuration;return this.setCurrentTime(t),this}setSpeed(e=1){return this.maxSpeed=e,this.all(t=>{t.updatePlaybackRate?t.updatePlaybackRate(e):t.playbackRate=e}),this}createArrayOfComputedOptions(e,t){let i=[],s=a=>{var n;return Object.assign({easing:a("easing"),iterations:a("loop"),direction:a("direction"),endDelay:a("endDelay"),duration:a("duration"),speed:a("speed"),delay:a("delay"),timelineOffset:a("timelineOffset"),keyframes:a("keyframes"),fill:a("fillMode"),composite:a("composite")},(n=a("extend"))!=null?n:{})};if(this.targets.size==0){let{delay:a,duration:n,iterations:r,endDelay:o,speed:l,timelineOffset:u}=s(h=>{var y,p;let c=(p=(y=e[h])!=null?y:this.options[h])!=null?p:q[h];return typeof c!="function"?c:q[h]});u=Number(u),r=Number(r),n=Number(n),o=Number(o),l=Number(l),a=Number(a),this.timelineOffset=u,this.minDelay=a,this.maxSpeed=l,this.maxDuration=n,this.maxEndDelay=o,this.totalDuration=a+u+n*r+o,this.totalDurationOptions={delay:a,duration:n,iterations:r,endDelay:o,speed:l,timelineOffset:u,totalDuration:this.totalDuration}}return this.targets.forEach((a,n)=>{var d;let r=(d=this.computedOptions.get(a))!=null?d:{},o=s(f=>{var g,C,j;let b=f;return f=="loop"&&(b="iterations"),f=="fillMode"&&(b="fill"),(j=(C=(g=e[f])!=null?g:r[b])!=null?C:this.options[f])!=null?j:q[f]}),l=_t(o,[n,t,a],this);if(typeof l.easing=="string"||Array.isArray(l.easing)){let{easing:f}=l;l.easing=Array.isArray(f)?f.map(b=>Ot(b)):Ot(f)}l.iterations===!0&&(l.iterations=1/0);let{timelineOffset:u,speed:h,endDelay:c,delay:y,duration:p,iterations:E,...O}=l;u=Number(u),E=Number(E),p=Number(p),c=Number(c),h=Number(h),y=Number(y),this.timelineOffset=u!=null?u:this.timelineOffset,this.minDelay>y&&(this.minDelay=y),this.maxSpeed>h&&(this.maxSpeed=h),this.maxDuration<p&&(this.maxDuration=p),this.maxEndDelay<c&&(this.maxEndDelay=c);let m=y+u+p*E+c;this.totalDuration<m&&(this.totalDuration=m,this.totalDurationOptions={delay:y,duration:p,totalDuration:m,iterations:E,endDelay:c,speed:h,timelineOffset:u}),i[n]={...O,speed:h,tempDurations:m,endDelay:c,delay:y+u,duration:p,iterations:E,timelineOffset:u}},this),i}createAnimations(e,t){let{arrOfComputedOptions:i,padEndDelay:s,oldCSSProperties:a,onfinish:n,oncancel:r,timeline:o}=e;this.targets.forEach((l,u)=>{var St,wt,At;let h,{speed:c,keyframes:y,tempDurations:p,timelineOffset:E,...O}=i[u];s&&O.endDelay==0&&Math.abs(O.iterations)!=Math.abs(1/0)&&(O.endDelay=this.totalDuration-p);let m,d,f=y;Gt(f)&&(f=Ht(f));let b,g,C=(St=this.computedKeyframes.get(l))!=null?St:{},j="transform"in this.properties?C:v(["transform"],C),Ut=Object.assign({},a,j),Zt=U(Ut,(L,z)=>{var P;return(P=this.properties[z])!=null?P:L});if(d=D(f)?f:Zt,Array.isArray(d))m=d.map(L=>{let{easing:z,offset:P,...X}=v(["speed","loop"],L);return Object.assign({},X,typeof z=="string"?{easing:Ot(z)}:null,typeof P=="string"||typeof P=="number"?{offset:ct(P)}:null)}),h=It(W),m=re(m);else{let L=v(["keyframes"],d),{offset:z,...P}=_t(L,[u,t,l],this);h=It(yt(P)),P=ne(P);let X=z;m=Object.assign({},P,D(X)?{offset:X.map(ct)}:null)}this.keyframeEffects.has(l)?(g=this.keyframeEffects.get(l),b=this.animations.get(g),(wt=g==null?void 0:g.setKeyframes)==null||wt.call(g,m),(At=g==null?void 0:g.updateTiming)==null||At.call(g,O)):(g=new KeyframeEffect(l,m,O),b=new Animation(g,o),this.keyframeEffects.set(l,g),this.animations.set(g,b)),b.updatePlaybackRate?b.updatePlaybackRate(c):b.playbackRate=c,b.onfinish=()=>{typeof n=="function"&&n.call(this,l,u,t,b)},b.oncancel=()=>{typeof r=="function"&&r.call(this,l,u,t,b)},Y&&Object.assign(l.style,{transform:h}),this.computedOptions.set(l,O),this.computedKeyframes.set(l,m)})}updateOptions(e={}){var t,i;try{let s=ut(e);this.initialOptions=s,this.options=Object.assign({},q,this.options,s);let{padEndDelay:a,autoplay:n,target:r,targets:o,timeline:l,onfinish:u,oncancel:h,...c}=v(Kt,this.options);this.properties=v(ce,s);let y=this.targets.values(),p=[...new Set([...y,...Et(o),...Et(r)])];this.targets.clear(),p.forEach((m,d)=>{this.targets.set(d,m),this.targetIndexes.set(m,d)});let E=this.targets.size,O=this.createArrayOfComputedOptions(s,E);if(this.createAnimations({arrOfComputedOptions:O,padEndDelay:a,oldCSSProperties:c,onfinish:u,oncancel:h,timeline:l},E),this.mainAnimation?((i=(t=this.mainkeyframeEffect)==null?void 0:t.updateTiming)==null||i.call(t,{duration:this.totalDuration}),(!this.mainkeyframeEffect.setKeyframes||!this.mainkeyframeEffect.updateTiming)&&console.warn("@okikio/animate - `KeyframeEffect.setKeyframes` and/or `KeyframeEffect.updateTiming` are not supported in this browser.")):(this.mainkeyframeEffect=new KeyframeEffect(this.mainElement,null,{duration:this.totalDuration}),this.mainAnimation=new Animation(this.mainkeyframeEffect,l)),this.mainAnimation.updatePlaybackRate?this.mainAnimation.updatePlaybackRate(this.maxSpeed):this.mainAnimation.playbackRate=this.maxSpeed,this.mainAnimation.onfinish=()=>{if(this.mainAnimation){let m=this.getPlayState();this.emit("playstate-change",m,this),this.loop(),this.stopLoop()}this.emit("finish",this)},this.mainAnimation.oncancel=()=>{if(this.mainAnimation){let m=this.getPlayState();this.emit("playstate-change",m,this),this.loop(),this.stopLoop()}this.emit("cancel",this)},n){let m=window.setTimeout(()=>{this.emit("begin",this);let d=this.getPlayState();this.emit("playstate-change",d,this),m=window.clearTimeout(m)},0);this.play()}else this.pause()}catch(s){this.emit("error",s)}}add(e){let t=this.getProgress(),i=this.is("running"),s=this.is("paused");return this.updateOptions({target:e}),this.setProgress(t),i?this.play():s&&this.pause(),this}removeTarget(e){let t=this.keyframeEffects.get(e);this.animations.delete(t),t=null,this.computedKeyframes.delete(e),this.computedOptions.delete(e),this.keyframeEffects.delete(e);let i=this.targetIndexes.get(e);return this.targets.delete(i),this.targetIndexes.delete(e),this}remove(e){this.removeTarget(e);let t=new Set([].concat(this.targets.values()));this.options.target=[...t],this.options.targets=[],t.clear(),t=null;let i=this.getProgress(),s=this.is("running"),a=this.is("paused");return this.updateOptions(),s?this.play():a&&this.pause(),this.setProgress(i),this}on(e,t,i){var s,a;return i=i!=null?i:this,(a=(s=this.emitter)==null?void 0:s.on)==null||a.call(s,e,t!=null?t:i,i),this.emitter.getEvent("update").length>0&&(S.RUNNING.add(this),S.animationFrame==null&&S.requestFrame()),this}off(e,t,i){var s,a;return i=i!=null?i:this,(a=(s=this.emitter)==null?void 0:s.off)==null||a.call(s,e,t!=null?t:i,i),this}emit(e,...t){var i,s;return(s=(i=this.emitter)==null?void 0:i.emit)==null||s.call(i,e,...t),this}toJSON(){return this.options}get[Symbol.toStringTag](){return"Animate"}},M=S;M.RUNNING=new Set,M.FRAME_RATE=60,M.FRAME_START_TIME=0,M.pauseOnPageHidden=!0;var ye=(e={})=>new M(e);var be=document.createElement("div");var me=(e,t)=>typeof e=="string"?/^\=/.test(e)?parseFloat(e.replace("=","")):parseFloat(e)+t:e+t,Vt=class{constructor(t={}){this.animateInstances=new R,this.initialOptions={},this.mainInstance=new M({duration:0}),this.initialOptions=Object.assign({},q,ut(t)),this.totalDuration=0,this.maxDuration=0}get totalDuration(){return this.mainInstance.totalDuration}set totalDuration(t){this.mainInstance.totalDuration=t}get maxDuration(){return this.mainInstance.maxDuration}set maxDuration(t){this.mainInstance.maxDuration=t}get minDelay(){return this.mainInstance.minDelay}set minDelay(t){this.mainInstance.minDelay=t}get maxSpeed(){return this.mainInstance.maxSpeed}set maxSpeed(t){this.mainInstance.maxSpeed=t}get maxEndDelay(){return this.mainInstance.maxEndDelay}set maxEndDelay(t){this.mainInstance.maxEndDelay=t}get timelineOffset(){return this.mainInstance.timelineOffset}set timelineOffset(t){this.mainInstance.timelineOffset=t}get options(){return this.mainInstance.options}set options(t){this.mainInstance.options=ut(t)}get emitter(){return this.mainInstance.emitter}get promise(){return this.mainInstance.promise}add(t={},i=0){let s,a=Object.assign({},q,this.initialOptions,t instanceof M?t.initialOptions:ut(t));return a.timelineOffset=me(i,this.totalDuration),a.autoplay=this.initialOptions.autoplay,t instanceof M?(s=t,s.updateOptions(a)):s=new M(a),this.animateInstances.add(s),this.updateTiming(),this}updateTiming(){let t=this.animateInstances.values(),i=Math.max(...t.map(s=>s.totalDuration));return this.mainInstance.updateOptions({autoplay:this.initialOptions.autoplay,duration:i,delay:Math.max(...t.map(s=>s.minDelay)),endDelay:i-Math.max(...t.map(s=>s.totalDuration-s.maxEndDelay))}),this}remove(t){let i=this.animateInstances.size;if(this.animateInstances.has(t)){let s=this.animateInstances.get(t),{totalDuration:a,timelineOffset:n}=s.totalDurationOptions,r=Number(a)-Number(n);for(let o=t;o<i;o++){let l=this.animateInstances.get(o);l.updateOptions({timelineOffset:l.timelineOffset-r})}return this.animateInstances.remove(t),this.updateTiming(),s}return null}then(t,i){var s,a;return t=t==null?void 0:t.bind(this),i=i==null?void 0:i.bind(this),(a=(s=this.mainInstance)==null?void 0:s.then)==null||a.call(s,t,i),this}catch(t){var i,s;return t=t==null?void 0:t.bind(this),(s=(i=this.mainInstance)==null?void 0:i.catch)==null||s.call(i,t),this}finally(t){var i,s;return t=t==null?void 0:t.bind(this),(s=(i=this.mainInstance)==null?void 0:i.finally)==null||s.call(i,t),this}allInstances(t){return this.animateInstances.forEach(t),this}all(t){return this.mainInstance&&t(this.mainInstance),this.allInstances(t),this}play(){return this.all(t=>t.play()),this}pause(){return this.all(t=>t.pause()),this}reverse(){return this.all(t=>t.reverse()),this}reset(){return this.all(t=>t.reset()),this}cancel(){return this.all(t=>t.cancel()),this}finish(){return this.all(t=>t.finish()),this}stop(){this.all(t=>t.stop()),this.animateInstances.clear(),this.mainInstance=null,this.animateInstances=null}getCurrentTime(){return this.mainInstance.getCurrentTime()}getProgress(){return this.mainInstance.getProgress()}getPlayState(){return this.mainInstance.getPlayState()}is(t){return this.mainInstance.is(t)}setCurrentTime(t){return this.all(i=>i.setCurrentTime(t)),this}setProgress(t){return this.all(i=>i.setProgress(t)),this}setSpeed(t=1){return this.all(i=>i.setSpeed(t)),this}on(t,i,s){var a,n;return s=s!=null?s:this,(n=(a=this.mainInstance)==null?void 0:a.on)==null||n.call(a,t,i!=null?i:s,s),this}off(t,i,s){var a,n;return s=s!=null?s:this,(n=(a=this.mainInstance)==null?void 0:a.off)==null||n.call(a,t,i!=null?i:s,s),this}emit(t,...i){var s,a;return(a=(s=this.mainInstance)==null?void 0:s.emit)==null||a.call(s,t,...i),this}toJSON(){return this.options}get[Symbol.toStringTag](){return"Timeline"}},Ee=(e={})=>new Vt(e);export{ye as a,Ee as b};
//# sourceMappingURL=chunk-ZGKB7IDU.js.map
