{
  "version": 3,
  "sources": ["src/ts/util/debounce.ts", "web-worker:./workers/esbuild.ts", "src/ts/index.ts"],
  "sourcesContent": ["// Based on https://davidwalsh.name/javascript-debounce-function\n// Returns a function, that, as long as it continues to be invoked, will not\n// be triggered. The function will be called after it stops being called for\n// N milliseconds. If `immediate` is passed, trigger the function on the\n// leading edge, instead of the trailing.\nexport const debounce = (func: (...args: any[]) => any, wait: number, immediate?: boolean) => {\n\tlet timeout: number;\n\treturn function(...args: any[]) {\n\t\tlet context = this;\n\t\tlet later = () => {\n\t\t\ttimeout = null;\n\t\t\tif (!immediate) func.apply(context, args);\n        };\n        \n\t\tlet callNow = immediate && !timeout;\n\t\tclearTimeout(timeout);\n\t\ttimeout = setTimeout(later, wait);\n\t\tif (callNow) func.apply(context, args);\n\t};\n};", "\n// This file is generated by esbuild to expose the worker script as a class, like Webpack's worker-loader\nexport default \"./js/esbuild.worker.js\"", "import { animate } from \"@okikio/animate\";\nimport { debounce } from \"./util/debounce\";\n\nimport type { editor } from \"monaco-editor\";\nimport ESBUILD_WORKER_URL from \"worker:./workers/esbuild.ts\";\n\nconst parseInput = (value: string) => {\n    const host = \"https://api.npms.io\";\n    let urlScheme = `${host}/v2/search?q=${encodeURIComponent(value)}&size=10`;\n    let version = \"\";\n\n    let exec = /([\\S]+)@([\\S]+)/g.exec(value);\n    if (exec) {\n        let [, pkg, ver] = exec;\n        version = ver;\n        urlScheme = `${host}/v2/search?q=${encodeURIComponent(pkg)}&size=10`;\n    }\n\n    return { url: urlScheme, version }\n};\n\n// SarchResults solidjs component\n(async () => {\n    const searchInput = document.querySelector(\".search input\") as HTMLInputElement;\n    searchInput?.addEventListener?.(\"keydown\", debounce(() => {\n        let { value } = searchInput;\n        if (value.length <= 0) return;\n\n        let { url, version } = parseInput(value);\n\n        (async () => {\n            let response = await fetch(url);\n            let result = await response.json();\n            setState(\n                // result.objects\n                result?.results.map(obj => {\n                    const { name, description, date, publisher } = obj.package;\n                    return {\n                        name, description,\n                        date, version,\n                        author: publisher.username\n                    };\n                }) ?? []\n            );\n        })();\n    }, 125));\n\n    const { renderComponent, setState } = await import(\"./components/SearchResults\");\n    const SearchContainerEl = document.querySelector(\".search-container\") as HTMLElement;\n    const SearchResultContainerEl = SearchContainerEl.querySelector(\".search-results-container\") as HTMLElement;\n    if (SearchResultContainerEl) renderComponent(SearchResultContainerEl);\n\n    const clearBtn = document.querySelector(\".search .clear\");\n    clearBtn?.addEventListener(\"click\", () => {\n        searchInput.value = \"\";\n        setState([]);\n    });\n})();\n\n// @ts-ignore\nwindow.requestIdleCallback(() => {\n    let editor: editor.IStandaloneCodeEditor;\n    (async () => {\n        let loadingContainerEl = document.querySelector(\".center-container\");\n        let Fade = animate({\n            target: loadingContainerEl,\n            opacity: [1, 0],\n            delay: 1000,\n            easing: \"ease-in\",\n            duration: 500,\n            autoplay: false\n        });\n\n        // Monaco Code Editor\n        let Monaco = await import(\"./modules/monaco\");\n        editor = Monaco.build();\n\n        // Fade away the loading screen\n        Fade.play();\n        await Fade;\n\n        loadingContainerEl?.remove();\n        Fade.stop();\n\n        loadingContainerEl = null;\n        Fade = null;\n\n        const { Emitter } = await import(\"./components/SearchResults\");\n        Emitter.on(\"add-module\", (v) => {\n            let value = `` + editor?.getValue();\n            editor.setValue(value + \"\\n\" + v);\n        });\n    })();\n\n    // esbuild bundler worker\n    const timeFormatter = new Intl.RelativeTimeFormat('en', { style: 'narrow', numeric: 'auto' });\n\n    let fileSizeEl = document.querySelector(\".file-size\");\n    let RunBtn = document.querySelector(\"#run\");\n    let bundleTime = document.querySelector(\"#bundle-time\");\n\n    // @ts-ignore\n    const BundleWorker = new Worker(ESBUILD_WORKER_URL, {\n        name: \"esbuild-worker\",\n        type: \"module\"\n    });\n\n    let count = 0;\n    let value = \"\";\n    let start = Date.now();\n\n    RunBtn.addEventListener(\"click\", () => {\n        value = `` + editor?.getValue();\n\n        fileSizeEl.innerHTML = `<div class=\"loading\"></div>`;\n        bundleTime.textContent = ``;\n\n        start = Date.now();\n        BundleWorker.postMessage(value);\n    });\n\n    BundleWorker.onmessage = ({ data }) => {\n        if (data.warn) {\n            console.warn(data.warn + \" \\n\");\n            return;\n        }\n\n        if (data.ready) {\n            fileSizeEl.textContent = `...`;\n            return;\n        }\n\n        if (data.error) {\n            console.error(data.type + \" (please create a new issue in the repo)\\n\", data.error);\n            fileSizeEl.textContent = `Error`;\n            return;\n        }\n\n        let { size, content } = data.value;\n        if (count > 10) {\n            console.clear();\n            count = 0;\n        }\n\n        let splitInput = value.split(\"\\n\");\n        console.groupCollapsed(`${size} =>`, `${splitInput[0]}${splitInput.length > 1 ? \"\\n...\" : \"\"}`);\n        console.groupCollapsed(\"Input Code: \");\n        console.log(value);\n        console.groupEnd();\n        console.groupCollapsed(\"Bundled Code: \");\n        console.log(content);\n        console.groupEnd();\n        console.groupEnd();\n        count++;\n\n        bundleTime.textContent = `Bundled ${timeFormatter.format((Date.now() - start) / 1000, \"seconds\")}`;\n        fileSizeEl.textContent = `` + size;\n    };\n});\n\n"],
  "mappings": "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",
  "names": []
}
