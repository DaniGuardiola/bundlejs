{"version":3,"file":"mod-f411cbec.cjs","sources":["../../core/src/deno/brotli/mod.ts"],"sourcesContent":["// https://deno.land/x/brotli@v0.1.4/mod.ts\n// Copyright 2020-present the denosaurs team. All rights reserved. MIT license.\n// import init, {\n//     source,\n//     compress as wasm_compress,\n//     decompress as wasm_decompress,\n// } from \"./wasm\";\n\nconst initialized = false;\nlet initWASM: typeof import(\"./wasm.ts\");\nexport const getWASM = async () => {\n  if (initWASM) return initWASM;\n\n  const wasm = await import(\"./wasm.ts\");\n  const { default: init, source } = wasm;\n    \n  if (!initialized) await init(await source());\n  return (initWASM = wasm);\n};\n\n/**\n * Compress a byte array.\n *\n * ```typescript\n * import { compress } from \"https://deno.land/x/brotli/mod.ts\";\n * const text = new TextEncoder().encode(\"X\".repeat(64));\n * console.log(text.length);                   // 64 Bytes\n * console.log(compress(text).length);         // 10 Bytes\n * ```\n *\n * @param input Input data.\n * @param bufferSize Read buffer size\n * @param quality Controls the compression-speed vs compression-\n * density tradeoff. The higher the quality, the slower the compression.\n * @param lgwin Base 2 logarithm of the sliding window size.\n */\nexport async function compress(\n  input: Uint8Array,\n  bufferSize = 4096,\n  quality = 6,\n  lgwin = 22,\n): Promise<Uint8Array> {\n  const { compress } = await getWASM();\n  return compress(input, bufferSize, quality, lgwin);\n}\n\n/**\n * Decompress a byte array.\n *\n * ```typescript\n * import { decompress } from \"https://deno.land/x/brotli/mod.ts.ts\";\n * const compressed = Uint8Array.from([ 27, 63, 0, 0, 36, 176, 226, 153, 64, 18 ]);\n * console.log(compressed.length);             // 10 Bytes\n * console.log(decompress(compressed).length); // 64 Bytes\n * ```\n *\n * @param input Input data.\n * @param bufferSize Read buffer size\n */\nexport async function decompress(\n  input: Uint8Array,\n  bufferSize = 4096,\n): Promise<Uint8Array> {\n  const { decompress } = await getWASM();\n  return decompress(input, bufferSize);\n}"],"names":["initWASM","getWASM","wasm","init","source","compress","input","bufferSize","quality","lgwin","decompress"],"mappings":"gFASA,IAAIA,EACG,MAAMC,EAAU,SAAY,CAC7B,GAAAD,EAAiB,OAAAA,EAEf,MAAAE,EAAO,MAAM,QAAO,QAAA,EAAA,KAAA,IAAA,QAAA,qBAAW,GAC/B,CAAE,QAASC,EAAM,OAAAC,CAAA,EAAWF,EAEV,aAAAC,EAAK,MAAMC,EAAA,CAAQ,EACnCJ,EAAWE,CACrB,EAkBA,eAAsBG,EACpBC,EACAC,EAAa,KACbC,EAAU,EACVC,EAAQ,GACa,CACrB,KAAM,CAAE,SAAAJ,GAAa,MAAMJ,EAAQ,EACnC,OAAOI,EAASC,EAAOC,EAAYC,EAASC,CAAK,CACnD,CAesB,eAAAC,EACpBJ,EACAC,EAAa,KACQ,CACrB,KAAM,CAAE,WAAAG,GAAe,MAAMT,EAAQ,EAC9BS,OAAAA,EAAWJ,EAAOC,CAAU,CACrC"}