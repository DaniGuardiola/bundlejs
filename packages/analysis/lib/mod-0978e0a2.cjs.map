{"version":3,"file":"mod-0978e0a2.cjs","sources":["../../core/src/deno/lz4/mod.ts"],"sourcesContent":["// https://deno.land/x/lz4@v0.1.2/mod.ts\n// Copyright 2020-present the denosaurs team. All rights reserved. MIT license.\n\n// import init, {\n//     source,\n//     lz4_compress,\n//     lz4_decompress,\n// } from \"./wasm\";\n\nlet initialized = false;\nlet initWASM: typeof import(\"./wasm\");\nexport const getWASM = async () => {\n    if (initWASM) return initWASM;\n\n    const wasm = await import(\"./wasm\");\n    const { default: init, source } = wasm;\n    \n    if (!initialized) await init(await source());\n    return (initWASM = wasm);\n}\n\n/**\n * Compress a byte array using lz4.\n *\n * ```typescript\n * import { compress } from \"https://deno.land/x/lz4/mod.ts\";\n * const text = new TextEncoder().encode(\"X\".repeat(64));\n * console.log(text.length);                   // 64 Bytes\n * console.log(compress(text).length);         // 6  Bytes\n * ```\n *\n * @param input Input data.\n */\nexport async function compress(input: Uint8Array): Promise<Uint8Array> {\n    const { lz4_compress } = await getWASM();\n    return lz4_compress(input);\n}\n\n/**\n * Decompress a byte array using lz4.\n *\n * ```typescript\n * import { decompress } from \"https://deno.land/x/lz4/mod.ts\";\n * const compressed = Uint8Array.from([ 31, 88, 1, 0, 44, 0 ]);\n * console.log(compressed.length);             // 6 Bytes\n * console.log(decompress(compressed).length); // 64 Bytes\n * ```\n *\n * @param input Input data.\n */\nexport async function decompress(input: Uint8Array): Promise<Uint8Array> {\n    const { lz4_decompress } = await getWASM();\n    return lz4_decompress(input);\n}"],"names":["initWASM","getWASM","wasm","init","source","compress","input","lz4_compress","decompress","lz4_decompress"],"mappings":"gFAUA,IAAIA,EACG,MAAMC,EAAU,SAAY,CAC3B,GAAAD,EAAiB,OAAAA,EAEf,MAAAE,EAAO,MAAM,QAAO,QAAA,EAAA,KAAA,IAAA,QAAA,qBAAA,GACpB,CAAE,QAASC,EAAM,OAAAC,CAAA,EAAWF,EAEV,aAAAC,EAAK,MAAMC,EAAA,CAAQ,EACnCJ,EAAWE,CACvB,EAcA,eAAsBG,EAASC,EAAwC,CACnE,KAAM,CAAE,aAAAC,CAAA,EAAiB,MAAMN,IAC/B,OAAOM,EAAaD,CAAK,CAC7B,CAcA,eAAsBE,EAAWF,EAAwC,CACrE,KAAM,CAAE,eAAAG,CAAA,EAAmB,MAAMR,IACjC,OAAOQ,EAAeH,CAAK,CAC/B"}