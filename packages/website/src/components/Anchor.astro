---
import clsx from "clsx";
import IconArrowUpRight from "~icons/fluent/arrow-up-right-24-regular";
let { href, class: className = "", external, ...rest } = Astro.props;

external = external ?? /^(http|mailto)/.test(href);
let attrs = external ? { target: "_blank", rel: "noopener" } : {};
---

<a
  {href}
  class={clsx({ "whitespace-nowrap": external }, className)}
  {...Object.assign(attrs, rest)}
  custom-anchor
>
  <slot />
  {external && <IconArrowUpRight astro-icon external-icon />}
</a>

<style lang="scss">
  a {
    :global(svg[astro-icon]) {
      display: inline-block;
      width: 1.5rem;
      height: 1.5rem;
    }

    :global(svg[external-icon]) {
      width: 1em;
      height: 1em;
      opacity: 0.6;
    }
}
</style>