---
// Component Imports
import Snippet from './Snippet.astro';

const snippets = await Astro.glob('../../snippets/*.mdx');

function sortFn (a, b) {
  const aPriority = a.frontmatter.priority as number;
  const bPriority = b.frontmatter.priority as number;
  if (aPriority < bPriority)
    return -1;
  else if (aPriority > bPriority)
    return 1;
  else
    return 0;
}
---

<div class="snippets">
  {
    snippets
      .sort(sortFn)
      .map(async ({ default: Content, frontmatter }) => {
        return (
          <Snippet content={frontmatter}>
            <Content />
          </Snippet>
        );
      })
  }
</div>

<style lang="scss">
  .snippets {
    @apply bg-gray-500/20 rounded-3xl p-6;
  }  
</style>