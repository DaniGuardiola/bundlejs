
.search-offset {
  @apply w-full;
  @apply py-12;
}

dialog.search-container {
  @apply bg-transparent;
  @apply absolute top-2 w-full;
  @apply p-1;

  height: fit-content;
  max-height: 410px;
  @apply overflow-auto pointer-events-none;
  @apply border border-transparent;
  @apply shadow-lg shadow-transparent;
  @apply bg-transparent;
  @apply z-10;
  
  &:before {  
    content: "";
    @apply absolute inset-0;
    @apply opacity-0 scale-x-95;
    @apply z-10;
  }

  &[open],
  &:before {
    @apply border border-gray-200 dark:border-quaternary;
    @apply bg-white dark:bg-black;
    @apply rounded-xl shadow-lg;
  }

  @at-root .dom-loaded dialog.search-container {
    &,
    &:before,
    & .search,
    & .search-results {
      @apply transition-all duration-300;
    }
  }

  &,
  &[open] {
    @apply block;
  }

  &[open] {
    @apply p-3 pointer-events-auto;
    
    &:before {
      @apply scale-x-100 shadow-transparent border-transparent;
    }

    &:before,
    & .search-results { 
      @apply opacity-100;
    }

    .search {
      @apply bg-gray-100 dark:bg-gray-900; 
      @apply border-transparent;
    }
  }
}

.search {
  @apply focus-within:ring-4 focus-within:ring-blue-500 focus-within:ring-opacity-50;
  @apply border border-gray-300;

  @apply bg-white;
  @apply dark:bg-black;
  @apply dark:border-gray-700;

  @apply flex items-center rounded-lg;
  @apply px-1 py-1;

  @apply sticky top-0 z-20 pointer-events-auto;

  input#input {
    @apply w-full ml-2 p-2 bg-transparent align-middle focus:outline-none;

    &::placeholder {
      @apply text-gray-400;
    }
  }

  [astro-icon] {
    @apply w-6 h-6;
  }

  [custom-button] {
    @apply px-3 py-1.5 gap-3;
    @apply flex flex-row justify-center;
    @apply bg-secondary/20 hover:bg-secondary/40;

    @apply dark:bg-primary/20 dark:hover:bg-primary/40;
  }
}

.search-results {
  @apply relative bg-transparent;

  @apply w-full z-10;
  @apply divide-y divide-gray-200 dark:divide-quaternary;

  @apply opacity-0;

  .results-list {
    @apply flex flex-col;
  }

  :is(h1, h2, h3, h4, h5, h6, p) {
    @apply pt-0;
  }
}

.result {
  @apply grid gap-6 sm:grid-cols-12;
  @apply p-5;

  .content {
    @apply flex flex-col gap-3;
    @apply col-span-12;

    &:not(.error) {
      @apply sm:col-span-9;
    }

    h3 {
      font-size: 1rem;
    }

    p {
      font-size: 0.9rem;
    }

    .updated-time {
      @apply text-gray-500 mt-1;
      font-size: 0.8rem;
    }
  }

  .add {
    @apply flex sm:text-center sm:col-span-3;
    justify-content: end;
    align-items: center;

    .btn {
      @apply py-2;
      @apply w-full relative block m-0;
      @apply bg-secondary/10 dark:bg-primary/10;
      @apply hover:bg-secondary/30 dark:hover:bg-primary/30;
      @apply active:bg-primary/30 dark:active:bg-secondary/30;

      .btn-text {
        @apply whitespace-nowrap opacity-100;
      }
    }
  }
}
